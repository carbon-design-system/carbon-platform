/*
 * Copyright IBM Corp. 2022, 2022
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
@use '@carbon/react/scss/breakpoint' as breakpoint;
@use '@carbon/react/scss/spacing' as spacing;
@use '@carbon/react/scss/theme' as theme;
@use '@carbon/react/scss/type' as type;
@use '@carbon/react/scss/motion' as motion;
@use '@carbon/react/scss/utilities/convert' as convert;
@use '../../styles/mixins' as mixins;

.resource-card {
  //override carbon aspect ratio styles
  :global(.cds--aspect-ratio--object) {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  //override carbon tile
  :global(.cds--tile) {
    position: relative;
    height: 100%;
    padding: spacing.$spacing-05 25% spacing.$spacing-05 spacing.$spacing-05;
    text-decoration: none;
    transition: background motion.$duration-fast-01;

    @media screen and (prefers-reduced-motion: reduce) {
      transition: none;
    }
  }

  .title {
    @include type.type-style('heading-03');

    color: theme.$text-primary;
    text-decoration: none;
  }

  .subtitle {
    @include type.type-style('heading-01');
    @include mixins.line-clamp(3);

    color: theme.$text-primary;
    font-weight: 400;
    text-decoration: none;
  }

  .icon-img {
    position: absolute;
    bottom: spacing.$spacing-05;
    left: spacing.$spacing-05;
    display: flex;
    width: convert.rem(32px);
    max-height: convert.rem(32px);
    align-items: flex-end;

    img {
      width: convert.rem(32px);
      max-height: convert.rem(32px);
    }

    img[class*='image'] {
      background: transparent;
    }
  }

  .icon-action {
    position: absolute;
    right: spacing.$spacing-05;
    bottom: spacing.$spacing-05;
    width: convert.rem(20px);
    height: convert.rem(20px);
  }

  .icon-action svg {
    fill: theme.$icon-primary;
  }

  // Disabled
  // override carbon tile
  &.disabled :global(.cds--tile):hover {
    background: theme.$layer-01;
    cursor: not-allowed;
  }

  &.disabled.title,
  &.disabled.subtitle {
    color: theme.$text-on-color-disabled;
  }

  &.disabled .icon-action svg {
    fill: theme.$icon-disabled;
  }

  &.disabled .icon-img {
    filter: grayscale(100%);
    opacity: 0.5;
  }

  .card-with-title {
    .subtitle {
      @include type.type-style('body-compact-01');

      color: theme.$text-secondary;
    }

    .title {
      @include type.type-style('body-compact-02');
      @include mixins.line-clamp(2);
    }
  }

  .child-component {
    position: absolute;
    top: spacing.$spacing-05;
    right: spacing.$spacing-05;
  }

  .card-with-component {
    padding-right: 50%;
  }
}

// Resource card group
// Add border only in between group of cards
// Forces 3rd card to start new "row"
// override carbon grid styles
// this is a class used by users
.resource-card-group {
  .cds--css-grid-column {
    margin-bottom: 0;
  }
  // items: 3,5,7,9...
  [class*='cds--lg:col-span-4']:nth-child(2n + 3) {
    @include breakpoint.breakpoint('lg') {
      grid-column-start: 1;
    }
  }

  .resource-card {
    border-top: 1px solid theme.$border-subtle;
  }

  [class*='cds--lg:col-span-4']:first-child .resource-card {
    border-top: 0 solid transparent;
  }

  [class*='cds--lg:col-span-4']:nth-child(2) .resource-card {
    @include breakpoint.breakpoint('md') {
      border-top: 0 solid transparent;
    }
  }

  [class*='cds--lg:col-span-4']:nth-child(even) .resource-card {
    @include breakpoint.breakpoint('md') {
      box-shadow: -1px 0 0 0 theme.$border-subtle;
    }
  }
}
